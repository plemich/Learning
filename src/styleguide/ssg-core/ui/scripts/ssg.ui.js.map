{"version":3,"sources":["ssgCore.template.js","ssg.ui.js","ssg.ui.helper.js"],"names":["this","Handlebars","template","compiler","main","container","depth0","helpers","partials","data","useData","registerPartial","helper","alias1","nullContext","alias2","helperMissing","alias4","escapeExpression","action","call","name","hash","title","index","prevEnabled","nextEnabled","stack1","alias3","baseFilter","filename","description","sample","width","height","ssg","UI","win","window","doc","document","ssgCoreTemplates","ssgCore","templates","ssgTemplates","patternConfig","currentSingleItems","currentSingleCount","viewports","State","coreUiElement","btnShowAnnotion","btnShowCode","btnShowToC","discoButton","filterButton","patternItem","tocItem","viewButton","viewPortButton","viewPortTarget","viewPortWidth","viewToc","viewTocInner","singleItemNav","singleItemNavTitle","singleNavLeft","singleNavRight","tocSearchBox","tocSearchValue","state","active","hidden","show","XTRAS","FILTERS","_currentUIState","defState","filter","screen","availWidth","xtras","_updateState","curState","checkSumXtras","checkSumFilter","checkSumScreen","i","length","indexOf","parseInt","toString","exception","_validateState","localStorage","setItem","JSON","stringify","sessionState","getItem","parse","current","update","Utils","requestData","method","url","Promise","resolve","reject","xhr","XMLHttpRequest","open","onload","curStatus","status","response","statusText","onerror","send","changeItemToSinglePage","nodes","nodeCount","curNode","classList","contains","remove","add","hideSingleItemSlider","hide","singleItemSelector","querySelector","undefined","Filter","elements","filterValue","newState","allElements","querySelectorAll","curElement","dataset","sliderSelection","firstItemFound","curSingleItem","category","file","getAttribute","push","EnableSingleSlider","initDisco","disco","setInterval","viewPortInner","curViewPort","Math","floor","random","value","style","clearInterval","Events","changeFilter","event","preventDefault","allButtons","curButton","target","tocButton","changeView","changeViewPort","vpButton","vpActiveButton","vpData","vpTarget","widthInput","innerWidth","vpCurSize","NaN","filterToc","currentToc","parentNode","filterFolder","filterCat","attributes","getNamedItem","filterSelector","split","filterButtons","curFilterButton","curFilterStyle","curDataSet","tocElement","curItem","searchToc","searchBox","getElementById","searchValue","resetResult","j","searchResult","showAnnotation","stopImmediatePropagation","newXtras","e","codeBlocks","showSource","showToc","currentButton","containerToc","viewPortResizer","KeyboardEvent","keyCode","innerPattern","newWidth","registerEvents","curElements","eventType","handler","addEventListener","Render","allContent","parser","DOMParser","patterns","curPattern","curPatternTitle","curTemplate","filepath","ssgData","content","parseFromString","body","innerHTML","allContentDOM","allTempLates","allPages","allOrganism","insertAdjacentHTML","Prism","highlightAll","object","folder","ssgToc","baseElement","folderpath","patternTitle","currentSection","tocItems","k","RenderToc","ApplyUIState","buttons","query","invQuery","substr","notSelItems","selItems","cat","curFilter","allAMItems","slice","allOPTItems","allItems","concat","applyFilter","viewPortQuery","viewPortActiveButton","widthSelector","contentWidth","applyScreenWidth","notes","notesButton","applyExtras","slideItems","currentTitle","textContent","setCurrentItem","curPatternElement","slidePatterns","stopPropagation","slider","newButton","cloneNode","replaceChild","findIndex","x","substring","ShowSliderCtrl","singleSliderControl","InitEvents","viewButtons","viewPortButtons","showCode","showAnnot","allTocItems","Init","all","then","result","error","PostRender","forEach","element","catch","registerHelper","block","markdownKey","root","ssgDoc","SafeString"],"mappings":"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","sourcesContent":["this[\"ssgCore\"] = this[\"ssgCore\"] || {};\nthis[\"ssgCore\"][\"templates\"] = this[\"ssgCore\"][\"templates\"] || {};\nthis[\"ssgCore\"][\"templates\"][\"addTools\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div id=\\\"ssg-add-tools\\\">\\n</div>\";\n},\"useData\":true});\nHandlebars.registerPartial(\"buttons\",Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<button id=\\\"ssg-btn\"\n    + alias4(((helper = (helper = helpers.action || (depth0 != null ? depth0.action : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"action\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" class=\\\"ssg-btn \"\n    + alias4(((helper = (helper = helpers[\"class\"] || (depth0 != null ? depth0[\"class\"] : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"class\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</button>\";\n},\"useData\":true}));\nthis[\"ssgCore\"][\"templates\"][\"itemselector\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div id=\\\"ssg-items\\\" data-item-index=\\\"\"\n    + alias4(((helper = (helper = helpers.index || (depth0 != null ? depth0.index : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"index\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<button class=\\\"ssg-btn prev\\\" \"\n    + alias4(((helper = (helper = helpers.prevEnabled || (depth0 != null ? depth0.prevEnabled : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"prevEnabled\",\"hash\":{},\"data\":data}) : helper)))\n    + \" >&lt;</button>\\n\t<span class=\\\"item-title\\\">\"\n    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\t<button class=\\\"ssg-btn next\\\" \"\n    + alias4(((helper = (helper = helpers.nextEnabled || (depth0 != null ? depth0.nextEnabled : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"nextEnabled\",\"hash\":{},\"data\":data}) : helper)))\n    + \" >&gt;</button>\\n</div>\";\n},\"useData\":true});\nthis[\"ssgCore\"][\"templates\"][\"patternItem\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"ssg-item\\\" data-cat=\\\"\"\n    + alias4(((helper = (helper = helpers.baseFilter || (depth0 != null ? depth0.baseFilter : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"baseFilter\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-file=\\\"\"\n    + alias4(((helper = (helper = helpers.filename || (depth0 != null ? depth0.filename : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"filename\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"ssg-item-header\\\">\\n\t\t<div class=\\\"ssg-item-title\\\">\"\n    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t\t<div class=\\\"ssg-item-description\\\">\\n\t\t\t<div class=\\\"ssg-docs\\\">\"\n    + alias4(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"description\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t\t\t<b class=\\\"ssg-pattern-label\\\">Pattern name:</b>\\n\t\t\t<span class=\\\"ssg-pattern-name\\\">\"\n    + alias4(((helper = (helper = helpers.filename || (depth0 != null ? depth0.filename : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"filename\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\t\t</div>\\n\t</div>\\n\t<div class=\\\"sample\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.sample || (depth0 != null ? depth0.sample : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sample\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\t<pre class=\\\"ssg-item-code\\\"><code class='language-markup'>\"\n    + alias4(((helper = (helper = helpers.sample || (depth0 != null ? depth0.sample : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sample\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</code></pre>\\n</div>\";\n},\"useData\":true});\nthis[\"ssgCore\"][\"templates\"][\"test\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"ello\\\"></div>\";\n},\"useData\":true});\nthis[\"ssgCore\"][\"templates\"][\"vpresizer\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\\n\t<input type=\\\"numeric\\\" id=\\\"ssg-vp-w\\\" class=\\\"ssg-input-s\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.width || (depth0 != null ? depth0.width : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"width\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<span id=\\\"ssg-vp-by\\\">x</span>\\n\t<input type=\\\"numeric\\\" id=\\\"ssg-vp-h\\\" class=\\\"ssg-input-s\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.height || (depth0 != null ? depth0.height : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"height\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<button id=\\\"ssg-btn-disco\\\" class=\\\"ssg-btn\\\">Disco</button>\\n\";\n},\"useData\":true});","\"use strict\";\n/// <reference path=\"../../typings/index.d.ts\" />\n;\nvar ssg;\n(function (ssg) {\n    var UI;\n    (function (UI) {\n        var win = window, doc = document, ssgCoreTemplates = ssgCore.templates, ssgTemplates = ssg.templates, patternConfig = null, currentSingleItems = [], currentSingleCount = 0, currentUIState = ssg.UI.State;\n        var viewports = [\n            320,\n            768,\n            1024,\n            3500\n        ];\n        UI.coreUiElement = {\n            // Buttons\n            btnShowAnnotion: '.ssg-button[data-action=\\'ssg-annot\\']',\n            btnShowCode: '.ssg-button[data-action=\\'ssg-code\\']',\n            btnShowToC: '.ssg-button[data-action=\\'ssg-toc\\']',\n            discoButton: '.ssg-button[data-viewport=\\'disco\\']',\n            filterButton: '.ssg-core-filter .ssg-button',\n            patternItem: 'div[class^=ssg-item]',\n            tocItem: '.ssg-toc-item',\n            viewButton: '.ssg-core-view .ssg-button',\n            viewPortButton: '.ssg-core-viewport .ssg-button',\n            viewPortTarget: '.ssg-patterns-inner',\n            viewPortWidth: '#ssg-in-width',\n            viewToc: '.ssg-toc',\n            viewTocInner: '.ssg-toc-inner',\n            singleItemNav: 'ssg-core-nav',\n            singleItemNavTitle: '#ssg-item-nav-label',\n            singleNavLeft: 'ssg-left',\n            singleNavRight: 'ssg-right',\n            tocSearchBox: '.ssg-toc-searchbox',\n            tocSearchValue: 'toc-searchbox',\n            // States\n            state: {\n                active: 'active',\n                hidden: 'hidden',\n                show: 'show'\n            }\n        };\n        UI.State = (function () {\n            var STATE_KEY = 'ssg.UI.State', XTRAS = ['isolate', 'code', 'annotation'], FILTERS = ['atoms', 'molecules', 'organism', 'templates', 'pages', 'single'], SCREEN = ['s', 'm', 'l', 'uwd', 'full', 'disco'];\n            var _currentUIState = null;\n            // default UI State;\n            var defState = {\n                'filter': 'atoms',\n                'screen': window.screen.availWidth,\n                'xtras': ['annotation']\n            };\n            // Validate current state entry\n            var _validateState = function (state) {\n                // checking if all states are valid\n                var checkSumXtras = 0, checkSumFilter = 0, checkSumScreen = 0;\n                // Check current xtra selection\n                for (var i = state.xtras.length - 1; i > 0; i--) {\n                    var curState = state.xtras[i];\n                    if (XTRAS.indexOf(curState) === -1) {\n                        checkSumXtras += 1;\n                    }\n                }\n                // Check current filter\n                if (FILTERS.indexOf(state.filter) === -1) {\n                    checkSumFilter += 1;\n                }\n                // check current screen\n                try {\n                    parseInt(state.screen.toString(), 10);\n                }\n                catch (exception) {\n                    console.log('ERROR:' + exception);\n                    checkSumScreen += 1;\n                }\n                if (checkSumFilter + checkSumXtras + checkSumScreen === 0) {\n                    return true;\n                }\n                return false;\n            };\n            var _updateState = function (state) {\n                var curState = state;\n                if (_validateState(state)) {\n                    localStorage.setItem(STATE_KEY, JSON.stringify(curState));\n                }\n                else {\n                    throw 'There are some errors with the state';\n                }\n            };\n            (function () {\n                var sessionState = localStorage.getItem(STATE_KEY);\n                // If session already exists\n                if (sessionState) {\n                    _currentUIState = JSON.parse(sessionState);\n                }\n                else {\n                    localStorage.setItem(STATE_KEY, JSON.stringify(defState));\n                    _currentUIState = defState;\n                }\n            })();\n            return {\n                current: function () {\n                    return _currentUIState;\n                },\n                update: function (state) {\n                    _updateState(state);\n                }\n            };\n        })();\n        var Utils;\n        (function (Utils) {\n            Utils.requestData = function (method, url) {\n                return new Promise(function (resolve, reject) {\n                    var xhr;\n                    var loaded = function () {\n                        var curStatus = this.status;\n                        if (curStatus >= 200 && curStatus < 300) {\n                            resolve(xhr.response);\n                        }\n                        else {\n                            reject({\n                                status: this.status,\n                                statusText: xhr.statusText\n                            });\n                        }\n                    };\n                    var onError = function () {\n                        reject({\n                            status: this.status,\n                            statusText: xhr.statusText\n                        });\n                    };\n                    xhr = new XMLHttpRequest();\n                    xhr.open(method, url);\n                    xhr.onload = loaded;\n                    xhr.onerror = onError;\n                    xhr.send();\n                });\n            };\n            Utils.changeItemToSinglePage = function (nodes) {\n                var nodeCount = nodes.length;\n                while (nodeCount !== 0) {\n                    nodeCount -= 1;\n                    var curNode = nodes[nodeCount];\n                    if (curNode.classList.contains('ssg-item')) {\n                        curNode.classList.remove('ssg-item');\n                        curNode.classList.add('ssg-item-single');\n                    }\n                }\n            };\n            Utils.hideSingleItemSlider = function (hide) {\n                var singleItemSelector = doc.querySelector('.' + UI.coreUiElement.singleItemNav);\n                if (singleItemSelector !== undefined && singleItemSelector !== null) {\n                    if (hide === true) {\n                        singleItemSelector.classList.add(UI.coreUiElement.state.hidden);\n                    }\n                    else {\n                        singleItemSelector.classList.remove(UI.coreUiElement.state.hidden);\n                    }\n                }\n            };\n        })(Utils = UI.Utils || (UI.Utils = {}));\n        ;\n        UI.Filter = {\n            elements: function (filterValue) {\n                switch (filterValue) {\n                    case 'atoms':\n                    case 'molecules':\n                        var newState = ssg.UI.State.current();\n                        newState.filter = filterValue;\n                        ssg.UI.State.update(newState);\n                        var allElements = doc.querySelectorAll('div[data-cat]');\n                        for (var i = allElements.length - 1; i >= 0; i--) {\n                            var curElement = allElements[i];\n                            if (curElement.dataset['cat'] === filterValue) {\n                                curElement.classList.remove('hide');\n                            }\n                            else {\n                                curElement.classList.add('hide');\n                            }\n                        }\n                        ssg.UI.Utils.hideSingleItemSlider(true);\n                        break;\n                    case 'organism':\n                        ssg.UI.Filter.sliderSelection(filterValue);\n                        break;\n                    case 'templates':\n                        ssg.UI.Filter.sliderSelection(filterValue);\n                        break;\n                    case 'pages':\n                        ssg.UI.Filter.sliderSelection(filterValue);\n                        break;\n                    default:\n                        break;\n                }\n            },\n            sliderSelection: function (filter) {\n                var allElements = doc.querySelectorAll('div[data-cat]'), firstItemFound = false;\n                // reset currentSingleItem\n                currentSingleItems = [];\n                for (var i = 0; i < allElements.length; i++) {\n                    var curElement = allElements[i];\n                    if (curElement.dataset['cat'] === filter) {\n                        var curSingleItem = {\n                            category: filter,\n                            file: curElement.dataset['file'],\n                            title: curElement.getAttribute('title')\n                        };\n                        currentSingleItems.push(curSingleItem);\n                        if (firstItemFound === false) {\n                            currentSingleCount = 0;\n                            firstItemFound = true;\n                            if (curElement.classList.contains('hide')) {\n                                curElement.classList.remove('hide');\n                            }\n                        }\n                        else {\n                            curElement.classList.add('hide');\n                        }\n                    }\n                    else {\n                        curElement.classList.add('hide');\n                    }\n                }\n                ssg.UI.EnableSingleSlider(currentSingleItems, null);\n                if (currentSingleItems.length > 1) {\n                    ssg.UI.Utils.hideSingleItemSlider(false);\n                }\n                else {\n                    ssg.UI.Utils.hideSingleItemSlider(true);\n                }\n            }\n        };\n        UI.initDisco = function () {\n            var disco = setInterval(function () {\n                var discoButton = document.querySelector(UI.coreUiElement.discoButton + '.' + UI.coreUiElement.state.active), viewPortInner = doc.querySelector(UI.coreUiElement.viewPortTarget), viewPortWidth = doc.querySelector(UI.coreUiElement.viewPortWidth);\n                if (discoButton !== null) {\n                    var curViewPort = Math.floor(Math.random() * (viewports.length - 0)) + 0;\n                    viewPortWidth.value = viewPortInner.style.width = viewports[curViewPort].toString();\n                }\n                else {\n                    clearInterval(disco);\n                }\n            }, 1000);\n        };\n        UI.Events = {\n            // change all filter\n            changeFilter: function (event) {\n                // prevent all default\n                event.preventDefault();\n                var allButtons = doc.querySelectorAll(UI.coreUiElement.filterButton);\n                for (var i = allButtons.length - 1; i >= 0; i--) {\n                    if (allButtons[i].classList.contains(UI.coreUiElement.state.active)) {\n                        allButtons[i].classList.remove(UI.coreUiElement.state.active);\n                    }\n                }\n                var curButton = event.target, filter = curButton.dataset['filter'];\n                curButton.classList.add(UI.coreUiElement.state.active);\n                if (filter === undefined) {\n                    throw 'filter cannot be undefined';\n                }\n                UI.Filter.elements(filter);\n                // Check if toc button is active otherwise remove state.\n                var tocButton = doc.querySelectorAll(UI.coreUiElement.btnShowToC);\n                // if toc button was found\n                if (tocButton.length !== 0) {\n                    // remove active state in case toc was selected\n                    if (tocButton[0].classList.contains(UI.coreUiElement.state.active)) {\n                        tocButton[0].classList.remove('active');\n                    }\n                }\n                ;\n                var curState = ssg.UI.State.current();\n                curState.filter = filter;\n                ssg.UI.State.update(curState);\n                return false;\n            },\n            // change view - Add isolated, code, Annotation\n            changeView: function (event) {\n                // prevent all default\n                event.preventDefault();\n                var curButton = event.target, filter = curButton.dataset['filter'];\n                curButton.classList.contains(UI.coreUiElement.state.active) ?\n                    curButton.classList.remove(UI.coreUiElement.state.active) : curButton.classList.add(UI.coreUiElement.state.active);\n            },\n            // adjust view port to differnet width\n            changeViewPort: function (event) {\n                event.preventDefault();\n                var vpButton = event.target, vpActiveButton = doc.querySelector(UI.coreUiElement.viewPortButton + '.' + UI.coreUiElement.state.active), vpData = vpButton.dataset['viewport'], vpTarget = doc.querySelector(UI.coreUiElement.viewPortTarget), widthInput = doc.querySelector(UI.coreUiElement.viewPortWidth);\n                // Updating State\n                var newState = ssg.UI.State.current();\n                newState.screen = vpData;\n                ssg.UI.State.update(newState);\n                // remove current active button\n                if (vpActiveButton !== null) {\n                    vpActiveButton.classList.remove(UI.coreUiElement.state.active);\n                }\n                if (vpActiveButton === vpButton) {\n                    vpButton.classList.remove(UI.coreUiElement.state.active);\n                    vpData = 'full';\n                }\n                else {\n                    vpButton.classList.add(UI.coreUiElement.state.active);\n                }\n                // recheck Active Buttons\n                vpActiveButton = doc.querySelector(UI.coreUiElement.viewPortButton + '.' + UI.coreUiElement.state.active);\n                if (vpActiveButton === null) {\n                    vpActiveButton = doc.querySelector('.ssg-button[data-viewport=\\'full\\']');\n                    vpActiveButton.classList.add(UI.coreUiElement.state.active);\n                }\n                // action what to do\n                if (typeof vpTarget !== undefined) {\n                    switch (vpData) {\n                        case 'full':\n                            vpData = vpTarget.style.width = win.innerWidth.toString();\n                            break;\n                        case 'disco':\n                            ssg.UI.initDisco();\n                            break;\n                        default:\n                            if (vpData !== undefined && vpData !== null) {\n                                vpTarget.style.width = vpData;\n                            }\n                            break;\n                    }\n                    if (vpData !== undefined && vpData !== null) {\n                        // assign special class for documentation\n                        var vpCurSize = parseInt(vpData, 10);\n                        if (vpCurSize !== NaN && vpCurSize <= 1024) {\n                            console.log('small view port size');\n                            vpTarget.classList.add('vp-small');\n                        }\n                        else {\n                            console.log('large view port size');\n                            vpTarget.classList.remove('vp-small');\n                        }\n                    }\n                }\n                if (vpData !== undefined && vpData !== 'disco') {\n                    // Update width indicator\n                    vpTarget = doc.querySelector(UI.coreUiElement.viewPortTarget);\n                    widthInput.value = vpData;\n                }\n            },\n            // filter single toc element\n            filterToc: function (event) {\n                event.preventDefault();\n                var currentToc = event.target;\n                // just in case current toc is null and the parent node is null\n                if (currentToc === null || currentToc.parentNode === null) {\n                    return;\n                }\n                var filter = currentToc.dataset['filter'], filterFolder = currentToc.dataset['folder'], filterCat = (currentToc.parentNode.attributes.getNamedItem('id').value), tocButton = doc.querySelector(ssg.UI.coreUiElement.btnShowToC);\n                if (tocButton) {\n                    tocButton[0].classList.add('active');\n                }\n                if (filterCat) {\n                    if (filterFolder === 'templates' ||\n                        filterFolder === 'organism' ||\n                        filterFolder === 'page') {\n                        var selectedItems = doc.querySelectorAll('div[data-cat=' + filterFolder + ']');\n                        // Updating current state\n                        var curState = ssg.UI.State.current();\n                        curState.filterSelector = '.' + filter;\n                        ssg.UI.State.update(curState);\n                        ssg.UI.Filter.sliderSelection(filterFolder);\n                    }\n                    else {\n                        ssg.UI.Utils.hideSingleItemSlider(true);\n                    }\n                    var category = filterCat.split('-')[1];\n                    var filterButtons = document.querySelectorAll('.ssg-core-filter .ssg-button');\n                    for (var i = filterButtons.length - 1; i >= 0; i--) {\n                        var curFilterButton = filterButtons[i], curFilterStyle = curFilterButton.classList, curDataSet = curFilterButton.dataset['filter'];\n                        if (curFilterStyle.contains('active')) {\n                            curFilterStyle.remove('active');\n                        }\n                        if (curDataSet === category) {\n                            curFilterStyle.add('active');\n                        }\n                    }\n                }\n                // Updating State\n                var newState = ssg.UI.State.current();\n                newState.filter = 'single';\n                newState.filterSelector = '.' + filter;\n                ssg.UI.State.update(newState);\n                if (filter !== null) {\n                    var allElements = doc.querySelectorAll(UI.coreUiElement.patternItem), tocElement = doc.querySelector(UI.coreUiElement.viewToc);\n                    if (tocElement === null) {\n                        throw 'Current toc elment is null';\n                    }\n                    for (var i = allElements.length - 1; i >= 0; i--) {\n                        var curItem = allElements[i];\n                        if (curItem.dataset['file'] === filter) {\n                            curItem.classList.remove('hide');\n                        }\n                        else {\n                            curItem.classList.add('hide');\n                        }\n                    }\n                    tocElement.classList.remove('show');\n                    tocElement.classList.add('hidden');\n                }\n            },\n            // search for item in toc\n            searchToc: function (event) {\n                event.preventDefault();\n                var searchBox = doc.getElementById(UI.coreUiElement.tocSearchValue);\n                if (searchBox !== null) {\n                    var searchValue = searchBox.value;\n                    var resetResult = doc.querySelectorAll('.ssg-toc-item');\n                    for (var j = resetResult.length - 1; j >= 0; j--) {\n                        if (resetResult[j].classList.contains('hide')) {\n                            resetResult[j].classList.remove('hide');\n                        }\n                    }\n                    if (searchValue !== '') {\n                        var searchResult = doc.querySelectorAll(\".ssg-toc-item:not([data-filter*='\" + searchValue + \"'])\");\n                        if (searchResult !== null) {\n                            for (var i = searchResult.length - 1; i >= 0; i--) {\n                                searchResult[i].classList.add('hide');\n                            }\n                        }\n                    }\n                }\n            },\n            // show and hides annotations\n            showAnnotation: function (event) {\n                event.preventDefault();\n                event.stopImmediatePropagation();\n                // Updating State\n                var newState = ssg.UI.State.current();\n                // check if code is already included in UI Extras\n                if (newState.xtras.indexOf('annotation') === -1) {\n                    newState.xtras.push('annotation');\n                }\n                else {\n                    var newXtras = newState.xtras.filter(function (e) { return e !== 'annotation'; });\n                    newState.xtras = newXtras;\n                }\n                ssg.UI.State.update(newState);\n                if (event.target.classList.contains(UI.coreUiElement.state.active)) {\n                    // show annotation by adding class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-description');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.add(UI.coreUiElement.state.show);\n                    }\n                }\n                else {\n                    // hide annotation code by removing the class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-description');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.remove(UI.coreUiElement.state.show);\n                    }\n                }\n            },\n            // Show and hides source code\n            showSource: function (event) {\n                event.preventDefault();\n                event.stopImmediatePropagation();\n                // Updating State\n                var newState = ssg.UI.State.current();\n                // check if code is already included in UI Extras\n                if (newState.xtras.indexOf('code') === -1) {\n                    newState.xtras.push('code');\n                }\n                else {\n                    var newXtras = newState.xtras.filter(function (e) { return e !== 'code'; });\n                    newState.xtras = newXtras;\n                }\n                ssg.UI.State.update(newState);\n                if (event.target.classList.contains(UI.coreUiElement.state.active)) {\n                    // sho source code by adding class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-code');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.add(UI.coreUiElement.state.show);\n                    }\n                }\n                else {\n                    // hide source code by removing the class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-code');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.remove(UI.coreUiElement.state.show);\n                    }\n                }\n            },\n            // show and collapse table of contents\n            showToc: function (event) {\n                event.preventDefault();\n                var currentButton = event.target, containerToc = doc.querySelector(UI.coreUiElement.viewToc);\n                currentButton !== null && currentButton.classList.contains(UI.coreUiElement.state.active) ?\n                    currentButton.classList.remove(UI.coreUiElement.state.active) : currentButton.classList.add(UI.coreUiElement.state.active);\n                if (containerToc !== null) {\n                    if (containerToc.classList.contains(UI.coreUiElement.state.show)) {\n                        containerToc.classList.add(UI.coreUiElement.state.hidden);\n                        containerToc.classList.remove(UI.coreUiElement.state.show);\n                    }\n                    else {\n                        containerToc.classList.remove(UI.coreUiElement.state.hidden);\n                        containerToc.classList.add(UI.coreUiElement.state.show);\n                    }\n                }\n            },\n            // Resize View Port through manual update of width\n            viewPortResizer: function (event) {\n                if (event instanceof KeyboardEvent) {\n                    var kbEvent = event;\n                    if (kbEvent.keyCode === 13) {\n                        var innerPattern = doc.querySelector(UI.coreUiElement.viewPortTarget), newWidth = doc.querySelector(UI.coreUiElement.viewPortWidth);\n                        innerPattern.style.width = newWidth.value;\n                    }\n                }\n                else {\n                    var innerPattern = doc.querySelector(UI.coreUiElement.viewPortTarget), newWidth = doc.querySelector(UI.coreUiElement.viewPortWidth);\n                    innerPattern.style.width = newWidth.value;\n                }\n            },\n            // register specific event on all notes\n            registerEvents: function (curElements, eventType, handler) {\n                for (var i = curElements.length - 1; i >= 0; i--) {\n                    curElements[i].addEventListener(eventType, handler);\n                }\n            }\n        };\n        UI.Render = function () {\n            var RenderToc = function (patternConfig) {\n                var patterns = patternConfig.patterns.filter(function (object) {\n                    return object['deleted'] === undefined;\n                }), folder = patternConfig.folder, ssgToc = doc.querySelector(UI.coreUiElement.viewTocInner);\n                for (var i = 0; i < folder.length; i++) {\n                    var baseElement = '<ul><li id=ssg-' + folder[i].name + ' class=ssg-toc-header>' +\n                        folder[i].name +\n                        '</li><ul id=ssg-' + folder[i].name + '-items class=ssg-toc-items></ul></ul>';\n                    ssgToc.insertAdjacentHTML('beforeend', baseElement);\n                }\n                for (var j = 0; j < patterns.length; j++) {\n                    var folderpath = patterns[j].filepath.split('/')[0];\n                    var patternTitle = '<li class=ssg-toc-item data-filter=\\\"' +\n                        patterns[j].filename + '\\\" ' +\n                        ' data-folder=\\\"' + folderpath + '\\\" ' +\n                        '>' +\n                        patterns[j].title + '</li>';\n                    var currentSection = doc.getElementById('ssg-' + folderpath + '-items');\n                    if (currentSection !== null) {\n                        currentSection.insertAdjacentHTML('beforeend', patternTitle);\n                    }\n                }\n                var tocItems = doc.querySelectorAll(UI.coreUiElement.tocItem);\n                for (var k = 0; k < tocItems.length; k++) {\n                    tocItems[k].addEventListener('click', UI.Events.filterToc);\n                }\n            };\n            var container = doc.querySelector(UI.coreUiElement.viewPortTarget), tocContainer = doc.querySelector(UI.coreUiElement.viewTocInner);\n            var allContent = '', allToc = '', parser = new DOMParser();\n            for (var i = patternConfig.patterns.length - 1; i >= 0; i--) {\n                var curPattern = patternConfig.patterns[i], curPatternTitle = curPattern.filename, curTemplate = ssgTemplates[curPatternTitle];\n                // Define base filter\n                curPattern.baseFilter = curPattern.filepath.split('/')[0];\n                if (curPattern !== null) {\n                    curPattern.sample = curTemplate !== undefined ? curTemplate(ssgData) : curTemplate;\n                    var content = ssgCoreTemplates.patternItem(curPattern);\n                    try {\n                        // Parse Document and check if all elements are properly closed\n                        var domContent = parser.parseFromString(content, 'text/html');\n                        // Append parsed content\n                        allContent = domContent.body.innerHTML + allContent;\n                    }\n                    catch (exception) {\n                        console.log(exception);\n                    }\n                }\n            }\n            var allContentDOM = parser.parseFromString(allContent, 'text/html');\n            // alter templates and pages\n            var allTempLates = allContentDOM.querySelectorAll('div[data-cat=templates]'), allPages = allContentDOM.querySelectorAll('div[data-cat=pages]'), allOrganism = allContentDOM.querySelectorAll('div[data-cat=organism]');\n            Utils.changeItemToSinglePage(allTempLates);\n            Utils.changeItemToSinglePage(allPages);\n            Utils.changeItemToSinglePage(allOrganism);\n            container.insertAdjacentHTML('afterbegin', allContentDOM.body.innerHTML);\n            Prism.highlightAll();\n            RenderToc(patternConfig);\n            UI.ApplyUIState(ssg.UI.State.current());\n        };\n        UI.ApplyUIState = function (state) {\n            var applyFilter = function (state) {\n                if (state.filter !== undefined\n                    && state.filter !== 'single') {\n                    var buttons = doc.querySelectorAll(\".ssg-button[data-filter]\");\n                    // Set correct button\n                    for (var i = buttons.length - 1; i >= 0; i--) {\n                        var curButton = buttons[i];\n                        if (curButton.dataset !== null\n                            && curButton.dataset !== undefined\n                            && curButton.dataset['filter'] === state.filter) {\n                            if (!curButton.classList.contains('active')) {\n                                curButton.classList.add('active');\n                            }\n                        }\n                        else {\n                            if (curButton.classList.contains('active')) {\n                                curButton.classList.remove('active');\n                            }\n                        }\n                    }\n                    var query = \"div[class^='ssg-item'][data-cat='\" + state.filter + \"']\", invQuery = \"div[class^='ssg-item']:not([data-cat='\" + state.filter + \"'])\";\n                    if (state.filter === 'single') {\n                        var filter = state.filterSelector.substr(1);\n                        query = \"div[data-file='\" + filter + \"']\";\n                        invQuery = \"div:not([data-file='\" + filter + \"'])\";\n                        var tocButton = doc.querySelectorAll(\".ssg-button[data-action='ssg-toc']\");\n                        if (tocButton !== undefined && tocButton.length === 1) {\n                            tocButton[0].classList.add('active');\n                        }\n                    }\n                    if (state.filter === 'organism' ||\n                        state.filter === 'molecules' ||\n                        state.filter === 'templates') {\n                        ssg.UI.Filter.sliderSelection(state.filter);\n                    }\n                    // unselect all\n                    var notSelItems = doc.querySelectorAll(invQuery);\n                    for (var i = notSelItems.length - 1; i >= 0; i--) {\n                        notSelItems[i].classList.add('hide');\n                    }\n                    // make sure all are selected\n                    var selItems = doc.querySelectorAll(query);\n                    if (selItems.length === 1) {\n                        var curItem = selItems[0];\n                        if (curItem !== undefined &&\n                            curItem !== null &&\n                            curItem.dataset !== undefined &&\n                            curItem.dataset !== null\n                            && (curItem.dataset.cat === 'templates'\n                                || curItem.dataset.cat === 'pages'\n                                || curItem.dataset.cat === 'organism')) {\n                            if (curItem.dataset.cat !== undefined\n                                && curItem.dataset.cat !== null) {\n                                ssg.UI.Filter.sliderSelection(curItem.dataset.cat);\n                            }\n                        }\n                        else {\n                            ssg.UI.Utils.hideSingleItemSlider(true);\n                        }\n                    }\n                    else {\n                        for (var i = selItems.length - 1; i >= 0; i--) {\n                            selItems[i].classList.remove('hide');\n                        }\n                    }\n                }\n                else if (state.filter === 'single') {\n                    var tocButton = doc.querySelector(UI.coreUiElement.btnShowToC);\n                    if (tocButton !== null) {\n                        tocButton.classList.add('active');\n                    }\n                    if (state.filterSelector !== undefined &&\n                        state.filterSelector !== null) {\n                        var curFilter = state.filterSelector.substr(1);\n                        var allAMItems = [].slice.call(doc.querySelectorAll('div[class=ssg-item')), allOPTItems = [].slice.call(doc.querySelectorAll('div[class=ssg-item-single')), allItems = allAMItems.concat(allOPTItems);\n                        for (var i = allItems.length - 1; i >= 0; i--) {\n                            if (allItems[i].dataset['file'] !== curFilter) {\n                                var curItem = allItems[i];\n                                curItem.classList.add('hide');\n                            }\n                        }\n                    }\n                }\n            };\n            // apply the correct selected scren width tot the viewport\n            var applyScreenWidth = function (state) {\n                var viewPortQuery = \"button[data-viewport='\" + state.screen + \"']\", viewPortInvQuery = \"button.active[data-viewport]\", \n                // selecting buttons\n                viewPortActiveButton = doc.querySelector(viewPortInvQuery), viewPortButton = doc.querySelector(viewPortQuery), \n                // width selector\n                widthSelector = doc.getElementById('ssg-in-width'), contentWidth = doc.querySelector('.ssg-patterns-inner');\n                // If full screeen use actian width\n                if (state.screen === 'full') {\n                    state.screen = window.innerWidth;\n                }\n                // set inner screen width of patterns\n                contentWidth.style.width = state.screen + \"px\";\n                // view width selector\n                widthSelector.value = state.screen;\n                // activate viewport button\n                if (viewPortButton !== undefined\n                    && viewPortButton !== null) {\n                    viewPortButton.classList.add('active');\n                    if (viewPortButton !== viewPortActiveButton && viewPortActiveButton !== null) {\n                        viewPortActiveButton.classList.remove('active');\n                    }\n                }\n            };\n            // applies extras such as shwo Source code\n            var applyExtras = function (state) {\n                // Set annotation button and enable annotations\n                if (state.xtras.indexOf('annotation') !== -1) {\n                    var notes = doc.querySelectorAll('.ssg-item-description');\n                    for (var i = notes.length - 1; i >= 0; i--) {\n                        var curNote = notes[i];\n                        curNote.classList.add('show');\n                    }\n                    var notesButton = doc.querySelectorAll(\"button[data-action='ssg-annot']\");\n                    for (var i = notesButton.length - 1; i >= 0; i--) {\n                        notesButton[i].classList.add('active');\n                    }\n                }\n                // Set code button and shows code\n                if (state.xtras.indexOf('code') !== -1) {\n                    var notes = doc.querySelectorAll('.ssg-item-code');\n                    for (var i = notes.length - 1; i >= 0; i--) {\n                        var curNote = notes[i];\n                        curNote.classList.add('show');\n                    }\n                    var notesButton = doc.querySelectorAll(\"button[data-action='ssg-code']\");\n                    for (var i = notesButton.length - 1; i >= 0; i--) {\n                        notesButton[i].classList.add('active');\n                    }\n                }\n            };\n            applyFilter(state);\n            applyScreenWidth(state);\n            applyExtras(state);\n        };\n        UI.EnableSingleSlider = function (currentSingleItems, filter) {\n            var slideItems = currentSingleItems, currentTitle = doc.querySelector(UI.coreUiElement.singleItemNavTitle);\n            if (currentTitle !== null) {\n                currentTitle.textContent = slideItems[0].title;\n            }\n            var setCurrentItem = function (index) {\n                var curElement = slideItems[index];\n                if (currentTitle !== null) {\n                    currentTitle.textContent = curElement.title;\n                }\n                var allElements = doc.querySelectorAll('div[data-cat=\\'' + slideItems[currentSingleCount].category + '\\']');\n                for (var j = 0; j < allElements.length; j++) {\n                    var curPatternElement = allElements[j];\n                    if (curPatternElement.dataset['file'] === curElement.file) {\n                        curPatternElement.classList.remove('hide');\n                        var newState = ssg.UI.State.current();\n                        // newState.filter = \"single\";\n                        newState.filterSelector = '.' + curPatternElement.dataset['file'];\n                        ssg.UI.State.update(newState);\n                    }\n                    else {\n                        curPatternElement.classList.add('hide');\n                    }\n                }\n            };\n            var slidePatterns = function (event) {\n                event.preventDefault();\n                event.stopPropagation();\n                var currentButton = event.target;\n                if (currentButton !== null) {\n                    if (currentButton.dataset['filter'] === UI.coreUiElement.singleNavLeft) {\n                        currentSingleCount -= 1;\n                    }\n                    ;\n                    if (currentButton.dataset['filter'] === UI.coreUiElement.singleNavRight) {\n                        currentSingleCount += 1;\n                    }\n                    ;\n                    if (currentSingleCount > currentSingleItems.length - 1) {\n                        currentSingleCount = 0;\n                    }\n                    if (currentSingleCount < 0) {\n                        currentSingleCount = currentSingleItems.length - 1;\n                    }\n                }\n                setCurrentItem(currentSingleCount);\n            };\n            // check if only one pattern is in current selection\n            if (slideItems.length <= 1) {\n                return;\n            }\n            // let slider = doc.querySelectorAll('.ssg-core-nav .ssg-button[data-filter=\\'' + filter + '\\']');\n            var slider = doc.querySelectorAll('.ssg-core-nav .ssg-button');\n            for (var i = 0; i < slider.length; i++) {\n                // remova all previous registered event handler\n                var currentButton = slider[i];\n                if (currentButton !== null) {\n                    // clone current node without event handler\n                    var newButton = currentButton.cloneNode(true);\n                    // register new Click event\n                    newButton.addEventListener('click', slidePatterns);\n                    if (currentButton.parentNode !== null) {\n                        // replace element\n                        currentButton.parentNode.replaceChild(newButton, currentButton);\n                    }\n                }\n            }\n            var curState = ssg.UI.State.current();\n            // Check if TOC have been selected\n            if (curState.filterSelector !== undefined) {\n                // Setting current Item count i case filter using TOC\n                currentSingleCount = currentSingleItems.findIndex(function (x) { return x.file === curState.filterSelector.substring(1); });\n                // Update from current filter\n                setCurrentItem(currentSingleCount);\n            }\n        };\n        UI.ShowSliderCtrl = function (show) {\n            var singleSliderControl = document.querySelector('.' + UI.coreUiElement.singleItemNav);\n            if (singleSliderControl !== null) {\n                if (show) {\n                    singleSliderControl.classList.remove('hidden');\n                }\n                else {\n                    singleSliderControl.classList.add('hidden');\n                }\n            }\n        };\n        UI.InitEvents = function () {\n            // Render Events\n            var filterButtons = doc.querySelectorAll(UI.coreUiElement.filterButton), viewButtons = doc.querySelectorAll(UI.coreUiElement.viewButton), viewPortButtons = doc.querySelectorAll(UI.coreUiElement.viewPortButton), viewPortWidth = doc.querySelectorAll(UI.coreUiElement.viewPortWidth), \n            // Action Buttons\n            showCode = doc.querySelectorAll(UI.coreUiElement.btnShowCode), showAnnot = doc.querySelectorAll(UI.coreUiElement.btnShowAnnotion), showToc = doc.querySelectorAll(UI.coreUiElement.btnShowToC), \n            // TOC Eevent\n            allTocItems = doc.querySelectorAll(UI.coreUiElement.tocSearchBox);\n            UI.Events.registerEvents(filterButtons, 'click', UI.Events.changeFilter);\n            UI.Events.registerEvents(viewButtons, 'click', UI.Events.changeView); // mabye obsolete?\n            UI.Events.registerEvents(viewPortButtons, 'click', UI.Events.changeViewPort);\n            UI.Events.registerEvents(viewPortWidth, 'blur', UI.Events.viewPortResizer);\n            UI.Events.registerEvents(viewPortWidth, 'focusout', UI.Events.viewPortResizer);\n            UI.Events.registerEvents(viewPortWidth, 'keypress', UI.Events.viewPortResizer);\n            UI.Events.registerEvents(showCode, 'click', UI.Events.showSource);\n            UI.Events.registerEvents(showAnnot, 'click', UI.Events.showAnnotation);\n            // show and hide table fo contents\n            UI.Events.registerEvents(showToc, 'click', UI.Events.showToc);\n            // Search table of contents\n            UI.Events.registerEvents(allTocItems, 'keyup', UI.Events.searchToc);\n        };\n        UI.Init = function () {\n            Promise.all([ssg.UI.Utils.requestData('GET', '/_config/pattern.conf.json')])\n                .then(function (result) {\n                try {\n                    patternConfig = JSON.parse(result.toString());\n                }\n                catch (error) {\n                    console.log(error);\n                }\n            })\n                .then(function () {\n                UI.Render();\n                UI.InitEvents();\n                UI.ApplyUIState(ssg.UI.State.current());\n                if (UI.PostRender.length !== 0) {\n                    UI.PostRender.forEach(function (element) {\n                        element();\n                    });\n                }\n            })\n                .catch(function (error) {\n                console.log(error);\n            });\n        };\n        UI.PostRender = [];\n    })(UI = ssg.UI || (ssg.UI = {}));\n    ;\n})(ssg || (ssg = {}));\nssg.UI.Init();\n","\"use strict\";\nHandlebars.registerHelper('description', function (block) {\n    var description = '', markdownKey = block.data.root.baseFilter + '_' + block.data.root.filename;\n    if (ssgDoc[markdownKey] !== undefined) {\n        description = ssgDoc[markdownKey].body;\n        return new Handlebars.SafeString(description);\n    }\n    else {\n        // description = block.data.root.description;\n        return block.data.root.description;\n    }\n});\n"],"file":"ssg.ui.js"}